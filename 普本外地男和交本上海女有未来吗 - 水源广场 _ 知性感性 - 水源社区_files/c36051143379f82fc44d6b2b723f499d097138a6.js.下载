"define"in window&&define("discourse/theme-91/discourse/api-initializers/discourse_share_topic",["exports","discourse/lib/api"],(function(e,t){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
require("discourse/lib/theme-settings-store").getObjectForTheme(91)
const i="http://www.w3.org/2000/svg"
e.default=(0,t.apiInitializer)("0.11.1",(e=>{if(e.container.lookup("service:site").desktopView){let t="second"
e.removePostMenuButton("share",(()=>!0)),e.addPostMenuButton("copy",(()=>{return{action:"copyLink",icon:"d-post-share",className:"post-action-menu__copy-link",title:(e="copy_title",`theme_translations.91.${e}`),position:t}
var e})),e.attachWidgetAction("post","copyLink",(function(){const e=this.attrs.shareUrl,t=this.attrs.id,n=`article[data-post-id='${t}']`
if(document.querySelector(`${n} .post-action-menu__copy-link .post-action-menu__copylink-checkmark`))return
const c=new URL(e,window.origin).toString(),r=document.querySelector(`${n} .post-action-menu__copy-link`)
navigator.clipboard.writeText(c).then((()=>{var e
o("Link copied!","success",t),function(e,t){const o=function(e){const t=document.createElementNS(i,"svg")
return t.setAttribute("class","post-action-menu__copylink-checkmark is-visible"),t.setAttribute("id",`postId_${e}`),t.setAttribute("xmlns",i),t.setAttribute("viewBox","0 0 52 52"),t.innerHTML='<path class="checkmark__check" fill="none" d="M13 26 l10 10 20 -20"/>',t}(t)
e.appendChild(o),setTimeout((()=>o.classList.remove("is-visible")),3e3),setTimeout((()=>s(`#postId_${t}`)),3500)}(r,t),(e=r).classList.add("is-copied"),setTimeout((()=>e.classList.remove("is-copied")),3200)}),(()=>{o("Failed to copy link.","fail")}))}))}}))
function o(e,t,i){const o=`article[data-post-id='${i}'] .post-action-menu__copy-link`
let n=document.querySelector(o)
if(!n)return
let c=document.createElement("div")
c.className="link-copied-alert"+("success"===t?" -success":" -fail"),c.textContent=e,n.appendChild(c),setTimeout((()=>c.classList.add("slide-out")),1e3),setTimeout((()=>s(o,c)),2500)}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.querySelector(e)
t&&t.parentNode&&t.parentNode.removeChild(t)}}))

//# sourceMappingURL=c36051143379f82fc44d6b2b723f499d097138a6.map?__ws=shuiyuan.sjtu.edu.cn
